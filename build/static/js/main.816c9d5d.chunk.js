(this["webpackJsonpgraphql-todo"]=this["webpackJsonpgraphql-todo"]||[]).push([[0],{64:function(e,n,t){"use strict";t.r(n);var a,r,o,c,s=t(6),i=t.n(s),d=t(47),u=t.n(d),l=t(71),p=t(72),b=t(70),h=t(25),j=t.n(h),f=t(36),m=t(30),O=t(29),x=t(73),g=t(74),w=t(75),y=t(10),v=Object(x.a)(a||(a=Object(O.a)(["\n  query getTodos {\n    todos(order_by: { created_at: desc }) {\n      name\n      done\n      id\n    }\n  }\n"]))),k=Object(x.a)(r||(r=Object(O.a)(["\n  mutation toggleDone($id: uuid!, $done: Boolean!) {\n    update_todos(where: { id: { _eq: $id } }, _set: { done: $done }) {\n      returning {\n        name\n        done\n        id\n      }\n    }\n  }\n"]))),q=Object(x.a)(o||(o=Object(O.a)(["\n  mutation addTodo($name: String!) {\n    insert_todos(objects: { name: $name }) {\n      returning {\n        name\n        done\n        id\n      }\n    }\n  }\n"]))),C=Object(x.a)(c||(c=Object(O.a)(["\n  mutation delTodo($id: uuid!) {\n    delete_todos(where: { id: { _eq: $id } }) {\n      returning {\n        name\n        done\n        id\n      }\n    }\n  }\n"])));var N=function(){var e=i.a.useState(""),n=Object(m.a)(e,2),t=n[0],a=n[1],r=Object(g.a)(v),o=r.data,c=r.loading,s=r.error,d=Object(w.a)(k),u=Object(m.a)(d,1)[0],l=Object(w.a)(C,{onCompleted:function(){alert("Todo deleted successfully")}}),p=Object(m.a)(l,1)[0],b=Object(w.a)(q,{onCompleted:function(){a(""),alert("Todo added successfully")}}),h=Object(m.a)(b,1)[0];function O(){return(O=Object(f.a)(j.a.mark((function e(n){var t,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,a=n.done,e.next=3,u({variables:{id:t,done:!a}});case 3:r=e.sent,console.log(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(f.a)(j.a.mark((function e(n){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id,!window.confirm("Are you sure you want to delete")){e.next=7;break}return e.next=5,p({variables:{id:t},update:function(e){var n=e.readQuery({query:v}).todos.filter((function(e){return e.id!==t}));e.writeQuery({query:v,data:{todos:n},merge:!0})}});case 5:a=e.sent,console.log(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(f.a)(j.a.mark((function e(n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.trim()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h({variables:{name:t},refetchQueries:[{query:v}]});case 5:a=e.sent,console.log(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return c?Object(y.jsx)("p",{className:"purple",children:"Loading...."}):s?Object(y.jsx)("p",{children:"Error fetching todo ...."}):Object(y.jsxs)("div",{className:"code vh-100 flex flex-column items-center bg-purple pa3 fl-1 white",children:[Object(y.jsxs)("h1",{children:["Graphql Checklist"," ",Object(y.jsxs)("span",{role:"img","arial-label":"Checkmarks",children:[" ","\u2705"]})]}),Object(y.jsxs)("form",{onSubmit:function(e){return N.apply(this,arguments)},className:"mb3",children:[Object(y.jsx)("input",{className:"pa2 f4 b--dashed",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Enter new todo",onChange:function(e){return a(e.target.value)},value:t}),Object(y.jsx)("button",{className:"pa2 f4 bg-green pointer",type:"submit",children:"Enter"})]}),Object(y.jsx)("div",{className:"flex items-center  flex-column todo-content",children:o.todos.map((function(e){return Object(y.jsxs)("p",{onDoubleClick:function(){return function(e){return O.apply(this,arguments)}(e)},className:"pa3 dim f4 pointer ".concat(e.done&&"strike"),children:[e.name,Object(y.jsx)("button",{className:"pointer bg-transparent bn f4 pl3",onClick:function(){return function(e){return x.apply(this,arguments)}(e)},children:Object(y.jsx)("span",{className:"red",children:"\xd7"})})]},e.id)}))})]})},$=new l.a({headers:{contentType:"application/json","x-hasura-admin-secret":"WiUZOCJW4hYxuC7ikClR2ElwZhTlRDo0htRXBDJ0afw7b6QVPHzc3nhNt7IKzFZZ"},uri:"https://graphqh-and-apollo-with-react-todo-app.hasura.app/v1/graphql",cache:new p.a}),_=document.getElementById("root");u.a.render(Object(y.jsx)(b.a,{client:$,children:Object(y.jsx)(N,{})}),_)}},[[64,1,2]]]);
//# sourceMappingURL=main.816c9d5d.chunk.js.map